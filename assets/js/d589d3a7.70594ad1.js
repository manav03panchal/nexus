"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[7924],{6475(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"getting-started","title":"Getting Started","description":"This comprehensive guide walks you through installing Nexus, understanding its core concepts, and running your first tasks both locally and on remote servers.","source":"@site/docs/getting-started.md","sourceDirName":".","slug":"/getting-started","permalink":"/nexus/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/manav03panchal/nexus/tree/main/website/docs/getting-started.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Introduction","permalink":"/nexus/"},"next":{"title":"Configuration Reference","permalink":"/nexus/configuration"}}');var l=s(4848),r=s(8453);const d={sidebar_position:2},t="Getting Started",o={},a=[{value:"What is Nexus?",id:"what-is-nexus",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Required",id:"required",level:3},{value:"Optional (for remote execution)",id:"optional-for-remote-execution",level:3},{value:"Installing Elixir",id:"installing-elixir",level:3},{value:"Installation",id:"installation",level:2},{value:"Method 1: Quick Install (Recommended)",id:"method-1-quick-install-recommended",level:3},{value:"Method 2: From Source (Manual)",id:"method-2-from-source-manual",level:3},{value:"Verify Installation",id:"verify-installation",level:3},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Tasks",id:"tasks",level:3},{value:"Hosts",id:"hosts",level:3},{value:"Groups",id:"groups",level:3},{value:"Dependencies",id:"dependencies",level:3},{value:"Execution Strategies",id:"execution-strategies",level:3},{value:"Your First Configuration",id:"your-first-configuration",level:2},{value:"Step 1: Initialize a Config File",id:"step-1-initialize-a-config-file",level:3},{value:"Step 2: Create a Simple Local Config",id:"step-2-create-a-simple-local-config",level:3},{value:"Step 3: Validate Your Configuration",id:"step-3-validate-your-configuration",level:3},{value:"Step 4: List Available Tasks",id:"step-4-list-available-tasks",level:3},{value:"Step 5: Preview Execution (Dry Run)",id:"step-5-preview-execution-dry-run",level:3},{value:"Step 6: Run Tasks",id:"step-6-run-tasks",level:3},{value:"Step 7: Run Individual Tasks",id:"step-7-run-individual-tasks",level:3},{value:"Adding Remote Hosts",id:"adding-remote-hosts",level:2},{value:"Step 1: Define Hosts",id:"step-1-define-hosts",level:3},{value:"Step 2: Configure SSH Authentication",id:"step-2-configure-ssh-authentication",level:3},{value:"Using SSH Keys (Recommended)",id:"using-ssh-keys-recommended",level:4},{value:"Using SSH Agent",id:"using-ssh-agent",level:4},{value:"Specifying a Key on Command Line",id:"specifying-a-key-on-command-line",level:4},{value:"Step 3: Run Pre-flight Checks",id:"step-3-run-pre-flight-checks",level:3},{value:"Step 4: Deploy",id:"step-4-deploy",level:3},{value:"Command Options Reference",id:"command-options-reference",level:2},{value:"Understanding Output",id:"understanding-output",level:2},{value:"Success Output",id:"success-output",level:3},{value:"Failure Output",id:"failure-output",level:3},{value:"Verbose Mode",id:"verbose-mode",level:3},{value:"Handling Failures",id:"handling-failures",level:2},{value:"Default Behavior",id:"default-behavior",level:3},{value:"Continue on Error",id:"continue-on-error",level:3},{value:"Retry Logic",id:"retry-logic",level:3},{value:"JSON Output",id:"json-output",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Command not found: nexus&quot;",id:"command-not-found-nexus",level:3},{value:"&quot;Config file not found: nexus.exs&quot;",id:"config-file-not-found-nexusexs",level:3},{value:"&quot;SSH connection refused&quot;",id:"ssh-connection-refused",level:3},{value:"&quot;SSH authentication failed&quot;",id:"ssh-authentication-failed",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,l.jsx)(n.p,{children:"This comprehensive guide walks you through installing Nexus, understanding its core concepts, and running your first tasks both locally and on remote servers."}),"\n",(0,l.jsx)(n.h2,{id:"what-is-nexus",children:"What is Nexus?"}),"\n",(0,l.jsxs)(n.p,{children:["Nexus is a ",(0,l.jsx)(n.strong,{children:"distributed task runner"})," built in Elixir that enables you to:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Execute commands locally"})," - Run build scripts, tests, and local automation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Execute commands on remote hosts via SSH"})," - Deploy to servers, run maintenance tasks"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Manage dependencies between tasks"})," - Define task DAGs (Directed Acyclic Graphs) for complex pipelines"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Run tasks in parallel"})," - Execute across multiple hosts concurrently for maximum efficiency"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Handle failures gracefully"})," - Retry logic, continue-on-error, and detailed error reporting"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Nexus uses a simple Elixir-based DSL for configuration, making it easy to define complex deployment pipelines while maintaining readability."}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsx)(n.p,{children:"Before installing Nexus, ensure you have:"}),"\n",(0,l.jsx)(n.h3,{id:"required",children:"Required"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Elixir 1.15+"})," - Nexus is built with Elixir and requires the runtime"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check Elixir version\nelixir --version\n# Should show: Elixir 1.15.0 or later\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Erlang/OTP 25+"})," - Required by Elixir"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check Erlang version\nerl -eval 'erlang:display(erlang:system_info(otp_release)), halt().' -noshell\n# Should show: \"25\" or later\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"optional-for-remote-execution",children:"Optional (for remote execution)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"SSH client"})," - For connecting to remote hosts"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"SSH keys"})," - Ed25519, ECDSA, RSA, or DSA keys in ",(0,l.jsx)(n.code,{children:"~/.ssh/"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"SSH agent"})," - For convenient key management (optional but recommended)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"installing-elixir",children:"Installing Elixir"}),"\n",(0,l.jsx)(n.p,{children:"If you don't have Elixir installed:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# macOS (Homebrew)\nbrew install elixir\n\n# Ubuntu/Debian\nsudo apt-get install elixir\n\n# Fedora\nsudo dnf install elixir\n\n# Arch Linux\nsudo pacman -S elixir\n\n# Windows (Chocolatey)\nchoco install elixir\n\n# Universal (via asdf version manager - recommended)\nasdf plugin add elixir\nasdf install elixir latest\nasdf global elixir latest\n"})}),"\n",(0,l.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(n.h3,{id:"method-1-quick-install-recommended",children:"Method 1: Quick Install (Recommended)"}),"\n",(0,l.jsx)(n.p,{children:"The install script automatically clones, builds, and installs Nexus:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl -fsSL https://raw.githubusercontent.com/manav03panchal/nexus/main/scripts/install.sh | bash\n"})}),"\n",(0,l.jsx)(n.p,{children:"This will:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Check for Elixir installation"}),"\n",(0,l.jsx)(n.li,{children:"Clone the repository to a temp directory"}),"\n",(0,l.jsx)(n.li,{children:"Build the escript binary"}),"\n",(0,l.jsxs)(n.li,{children:["Install to ",(0,l.jsx)(n.code,{children:"/usr/local/bin"})," (or custom ",(0,l.jsx)(n.code,{children:"NEXUS_INSTALL_DIR"}),")"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Custom install location:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"NEXUS_INSTALL_DIR=~/.local/bin curl -fsSL https://raw.githubusercontent.com/manav03panchal/nexus/main/scripts/install.sh | bash\n"})}),"\n",(0,l.jsx)(n.h3,{id:"method-2-from-source-manual",children:"Method 2: From Source (Manual)"}),"\n",(0,l.jsx)(n.p,{children:"If you prefer to build manually:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Clone the repository\ngit clone https://github.com/manav03panchal/nexus.git\ncd nexus\n\n# Fetch dependencies\nmix deps.get\n\n# Build the escript binary\nmix escript.build\n\n# Move to your PATH\nsudo mv nexus /usr/local/bin/\n\n# Or add to local bin (no sudo required)\nmkdir -p ~/.local/bin\nmv nexus ~/.local/bin/\n# Add to PATH in ~/.bashrc or ~/.zshrc:\n# export PATH="$HOME/.local/bin:$PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"verify-installation",children:"Verify Installation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus --version\n# Output: nexus <version>\n\nnexus --help\n# Shows available commands and options\n"})}),"\n",(0,l.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,l.jsx)(n.p,{children:"Before diving into examples, let's understand Nexus's key concepts:"}),"\n",(0,l.jsx)(n.h3,{id:"tasks",children:"Tasks"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"task"})," is a named unit of work containing one or more commands:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'task :build do\n  run "mix compile"\n  run "mix test"\nend\n'})}),"\n",(0,l.jsx)(n.p,{children:"Tasks can:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Run on ",(0,l.jsx)(n.code,{children:":local"})," (default) or on remote hosts"]}),"\n",(0,l.jsx)(n.li,{children:"Depend on other tasks (run after dependencies complete)"}),"\n",(0,l.jsx)(n.li,{children:"Execute commands in sequence"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"hosts",children:"Hosts"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"host"})," represents a remote machine you can SSH into:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'host :web1, "deploy@192.168.1.10"        # user@hostname\nhost :web2, "deploy@192.168.1.11:2222"   # with custom port\nhost :web3, "web3.example.com"            # hostname only (uses defaults)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"groups",children:"Groups"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"group"})," is a named collection of hosts for targeting multiple machines:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:"group :webservers, [:web1, :web2, :web3]\ngroup :databases, [:db_primary, db_replica]\n"})}),"\n",(0,l.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsxs)(n.p,{children:["Tasks can depend on other tasks using the ",(0,l.jsx)(n.code,{children:"deps"})," option:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'task :test, deps: [:compile] do\n  run "mix test"\nend\n\ntask :deploy, deps: [:test, :build] do\n  run "deploy.sh"\nend\n'})}),"\n",(0,l.jsx)(n.p,{children:"Nexus automatically resolves dependencies using a DAG (Directed Acyclic Graph) and executes tasks in the correct order."}),"\n",(0,l.jsx)(n.h3,{id:"execution-strategies",children:"Execution Strategies"}),"\n",(0,l.jsx)(n.p,{children:"When a task runs on multiple hosts, you can control execution:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:":parallel"})," (default) - Run on all hosts concurrently"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:":serial"})," - Run on hosts one at a time"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'task :restart, on: :webservers, strategy: :serial do\n  run "systemctl restart app", sudo: true\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"your-first-configuration",children:"Your First Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-initialize-a-config-file",children:"Step 1: Initialize a Config File"}),"\n",(0,l.jsx)(n.p,{children:"Navigate to your project directory and create a configuration:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd /path/to/your/project\nnexus init\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This creates a ",(0,l.jsx)(n.code,{children:"nexus.exs"})," template. Let's replace it with a practical example."]}),"\n",(0,l.jsx)(n.h3,{id:"step-2-create-a-simple-local-config",children:"Step 2: Create a Simple Local Config"}),"\n",(0,l.jsxs)(n.p,{children:["Create or edit ",(0,l.jsx)(n.code,{children:"nexus.exs"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'# nexus.exs - Local build pipeline example\n\n# Configuration (optional - these are defaults)\nconfig :nexus,\n  command_timeout: 60_000,    # 60 seconds per command\n  continue_on_error: false     # Stop on first failure\n\n# Step 1: Install dependencies\ntask :deps do\n  run "mix deps.get"\nend\n\n# Step 2: Compile (depends on deps)\ntask :compile, deps: [:deps] do\n  run "mix compile --warnings-as-errors"\nend\n\n# Step 3: Run tests (depends on compile)\ntask :test, deps: [:compile] do\n  run "mix test"\nend\n\n# Step 4: Build release (depends on test)\ntask :build, deps: [:test] do\n  run "MIX_ENV=prod mix release --overwrite"\nend\n\n# Convenience task to run everything\ntask :all, deps: [:build] do\n  run "echo \'Build complete!\'"\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-validate-your-configuration",children:"Step 3: Validate Your Configuration"}),"\n",(0,l.jsx)(n.p,{children:"Always validate before running:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus validate\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Configuration valid: nexus.exs\n\nSummary:\n  Tasks:  5\n  Hosts:  0\n  Groups: 0\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-list-available-tasks",children:"Step 4: List Available Tasks"}),"\n",(0,l.jsx)(n.p,{children:"See what tasks are defined:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus list\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Tasks\n========================================\n  deps\n    1 command\n  compile (deps: deps)\n    1 command\n  test (deps: compile)\n    1 command\n  build (deps: test)\n    1 command\n  all (deps: build)\n    1 command\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-5-preview-execution-dry-run",children:"Step 5: Preview Execution (Dry Run)"}),"\n",(0,l.jsx)(n.p,{children:"See what would happen without actually running:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run all --dry-run\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Execution Plan\n========================================\nTotal tasks: 5\n\nPhase 1: deps\nPhase 2: compile\nPhase 3: test\nPhase 4: build\nPhase 5: all\n"})}),"\n",(0,l.jsx)(n.p,{children:"Note how Nexus resolved the dependency chain and organized tasks into phases."}),"\n",(0,l.jsx)(n.h3,{id:"step-6-run-tasks",children:"Step 6: Run Tasks"}),"\n",(0,l.jsx)(n.p,{children:"Execute the full pipeline:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run all\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[ok] Task: deps\n  Host: local (ok)\n    [+] $ mix deps.get\n        Resolving Hex dependencies...\n        ... output ...\n\n[ok] Task: compile\n  Host: local (ok)\n    [+] $ mix compile --warnings-as-errors\n        Compiling 42 files (.ex)\n        Generated myapp app\n\n[ok] Task: test\n  Host: local (ok)\n    [+] $ mix test\n        Running ExUnit...\n        42 tests, 0 failures\n\n[ok] Task: build\n  Host: local (ok)\n    [+] $ MIX_ENV=prod mix release --overwrite\n        * assembling myapp-0.1.0 on MIX_ENV=prod\n        Release created at _build/prod/rel/myapp\n\n[ok] Task: all\n  Host: local (ok)\n    [+] $ echo 'Build complete!'\n        Build complete!\n\n========================================\nStatus: SUCCESS\nDuration: 45230ms\nTasks: 5/5 succeeded\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-7-run-individual-tasks",children:"Step 7: Run Individual Tasks"}),"\n",(0,l.jsx)(n.p,{children:"You can run specific tasks (and their dependencies):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Run just the compile task (will also run deps first)\nnexus run compile\n\n# Run tests (will run deps and compile first)\nnexus run test\n\n# Run multiple specific tasks\nnexus run deps compile\n"})}),"\n",(0,l.jsx)(n.h2,{id:"adding-remote-hosts",children:"Adding Remote Hosts"}),"\n",(0,l.jsx)(n.p,{children:"Now let's extend our configuration to deploy to remote servers."}),"\n",(0,l.jsx)(n.h3,{id:"step-1-define-hosts",children:"Step 1: Define Hosts"}),"\n",(0,l.jsxs)(n.p,{children:["Add hosts to your ",(0,l.jsx)(n.code,{children:"nexus.exs"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'# nexus.exs - With remote hosts\n\n# Define your servers\nhost :web1, "deploy@192.168.1.10"\nhost :web2, "deploy@192.168.1.11"\nhost :web3, "deploy@192.168.1.12:2222"  # Custom SSH port\n\nhost :db_primary, "admin@db1.example.com"\nhost :db_replica, "admin@db2.example.com"\n\n# Group hosts for convenience\ngroup :web, [:web1, :web2, :web3]\ngroup :database, [:db_primary, :db_replica]\ngroup :all_servers, [:web1, :web2, :web3, :db_primary, :db_replica]\n\n# Local build tasks\ntask :build do\n  run "MIX_ENV=prod mix release --overwrite"\nend\n\n# Deploy to web servers (runs in parallel across all hosts by default)\ntask :deploy, on: :web, deps: [:build] do\n  run "mkdir -p /opt/myapp/releases"\n  run "echo \'Deploying to $(hostname)...\'"\nend\n\n# Run database migrations (on primary only)\ntask :migrate, on: :db_primary, deps: [:deploy] do\n  run "/opt/myapp/bin/myapp eval \'MyApp.Release.migrate()\'"\nend\n\n# Restart services one at a time to avoid downtime\ntask :restart, on: :web, strategy: :serial do\n  run "systemctl restart myapp", sudo: true\n  run "sleep 5"  # Wait for service to start\n  run "curl -f http://localhost:4000/health"  # Health check\nend\n\n# Check status on all servers\ntask :status, on: :all_servers do\n  run "hostname && uptime"\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-configure-ssh-authentication",children:"Step 2: Configure SSH Authentication"}),"\n",(0,l.jsx)(n.p,{children:"Nexus supports multiple authentication methods:"}),"\n",(0,l.jsx)(n.h4,{id:"using-ssh-keys-recommended",children:"Using SSH Keys (Recommended)"}),"\n",(0,l.jsxs)(n.p,{children:["Nexus automatically looks for keys in ",(0,l.jsx)(n.code,{children:"~/.ssh/"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"~/.ssh/id_ed25519"})," (preferred)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"~/.ssh/id_ecdsa"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"~/.ssh/id_rsa"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"~/.ssh/id_dsa"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Generate an Ed25519 key (recommended)\nssh-keygen -t ed25519 -C "deploy@nexus" -f ~/.ssh/deploy_key\n\n# Copy to your servers\nssh-copy-id -i ~/.ssh/deploy_key.pub deploy@192.168.1.10\nssh-copy-id -i ~/.ssh/deploy_key.pub deploy@192.168.1.11\n'})}),"\n",(0,l.jsx)(n.h4,{id:"using-ssh-agent",children:"Using SSH Agent"}),"\n",(0,l.jsx)(n.p,{children:"If you use an SSH agent, Nexus will automatically use it:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Start agent (if not running)\neval "$(ssh-agent -s)"\n\n# Add your key\nssh-add ~/.ssh/deploy_key\n'})}),"\n",(0,l.jsx)(n.h4,{id:"specifying-a-key-on-command-line",children:"Specifying a Key on Command Line"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run deploy -i ~/.ssh/deploy_key\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-run-pre-flight-checks",children:"Step 3: Run Pre-flight Checks"}),"\n",(0,l.jsx)(n.p,{children:"Before deploying, verify connectivity:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus preflight deploy\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Pre-flight Checks\n----------------------------------------\n[ok] config: Configuration is valid\n     Tasks: 4, Hosts: 5, Groups: 3\n[ok] hosts: All 3 host(s) reachable\n     web1: reachable\n     web2: reachable\n     web3: reachable\n[ok] ssh: SSH authentication OK for 3 host(s)\n     web1: ok\n     web2: ok\n     web3: ok\n[ok] tasks: All requested tasks found\n\nExecution Plan\n----------------------------------------\nPhase 1:\n  - build [local] (1 cmd, parallel)\nPhase 2:\n  - deploy [web1, web2, web3] (2 cmd, parallel)\n\n========================================\nAll checks passed (1245ms)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-deploy",children:"Step 4: Deploy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Preview first\nnexus run deploy --dry-run\n\n# Then execute\nnexus run deploy -i ~/.ssh/deploy_key\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[ok] Task: build\n  Host: local (ok)\n    [+] $ MIX_ENV=prod mix release --overwrite\n        * assembling myapp-0.1.0 on MIX_ENV=prod\n        Release created at _build/prod/rel/myapp\n\n[ok] Task: deploy\n  Host: web1 (ok)\n    [+] $ mkdir -p /opt/myapp/releases\n    [+] $ echo 'Deploying to $(hostname)...'\n        Deploying to web1...\n  Host: web2 (ok)\n    [+] $ mkdir -p /opt/myapp/releases\n    [+] $ echo 'Deploying to $(hostname)...'\n        Deploying to web2...\n  Host: web3 (ok)\n    [+] $ mkdir -p /opt/myapp/releases\n    [+] $ echo 'Deploying to $(hostname)...'\n        Deploying to web3...\n\n========================================\nStatus: SUCCESS\nDuration: 3421ms\nTasks: 2/2 succeeded\n"})}),"\n",(0,l.jsx)(n.h2,{id:"command-options-reference",children:"Command Options Reference"}),"\n",(0,l.jsx)(n.p,{children:"Here's a quick reference for common command-line options:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Option"}),(0,l.jsx)(n.th,{children:"Short"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--config FILE"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-c"})}),(0,l.jsxs)(n.td,{children:["Path to config file (default: ",(0,l.jsx)(n.code,{children:"nexus.exs"}),")"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--dry-run"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-n"})}),(0,l.jsx)(n.td,{children:"Show what would run without executing"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--verbose"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-v"})}),(0,l.jsx)(n.td,{children:"Show detailed output including timings"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--quiet"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-q"})}),(0,l.jsx)(n.td,{children:"Minimal output"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--identity FILE"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-i"})}),(0,l.jsx)(n.td,{children:"SSH private key file"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--user USER"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-u"})}),(0,l.jsx)(n.td,{children:"SSH username"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--parallel-limit N"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-p"})}),(0,l.jsx)(n.td,{children:"Max parallel tasks (default: 10)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--continue-on-error"})}),(0,l.jsx)(n.td,{}),(0,l.jsx)(n.td,{children:"Continue on task failure"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--format FORMAT"})}),(0,l.jsx)(n.td,{}),(0,l.jsxs)(n.td,{children:["Output format: ",(0,l.jsx)(n.code,{children:"text"})," or ",(0,l.jsx)(n.code,{children:"json"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--plain"})}),(0,l.jsx)(n.td,{}),(0,l.jsx)(n.td,{children:"Disable colors"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"understanding-output",children:"Understanding Output"}),"\n",(0,l.jsx)(n.h3,{id:"success-output",children:"Success Output"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[ok] Task: taskname\n  Host: hostname (ok)\n    [+] $ command that was run\n        output from command\n        more output...\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[ok]"})," - Task completed successfully"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[+]"})," - Command succeeded (exit code 0)"]}),"\n",(0,l.jsx)(n.li,{children:"Indented lines show command output"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"failure-output",children:"Failure Output"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[FAILED] Task: taskname\n  Host: hostname (failed)\n    [x] $ command that failed\n        error output...\n        (exit: 1, 234ms, attempts: 3)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[FAILED]"})," - Task had errors"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[x]"})," - Command failed (non-zero exit code)"]}),"\n",(0,l.jsx)(n.li,{children:"Shows exit code, duration, and retry attempts"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"verbose-mode",children:"Verbose Mode"}),"\n",(0,l.jsxs)(n.p,{children:["Add ",(0,l.jsx)(n.code,{children:"--verbose"})," for extra details:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run deploy --verbose\n"})}),"\n",(0,l.jsx)(n.p,{children:"Shows:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Connection information"}),"\n",(0,l.jsx)(n.li,{children:"Timing for each command"}),"\n",(0,l.jsx)(n.li,{children:"Retry attempts"}),"\n",(0,l.jsx)(n.li,{children:"Exit codes"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"handling-failures",children:"Handling Failures"}),"\n",(0,l.jsx)(n.h3,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,l.jsx)(n.p,{children:"By default, Nexus stops on the first failure:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run deploy\n# If deploy fails, no subsequent tasks run\n"})}),"\n",(0,l.jsx)(n.h3,{id:"continue-on-error",children:"Continue on Error"}),"\n",(0,l.jsx)(n.p,{children:"To continue despite failures:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run deploy --continue-on-error\n"})}),"\n",(0,l.jsx)(n.p,{children:"Or in config:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:"config :nexus,\n  continue_on_error: true\n"})}),"\n",(0,l.jsx)(n.h3,{id:"retry-logic",children:"Retry Logic"}),"\n",(0,l.jsx)(n.p,{children:"Commands can be configured to retry on failure:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-elixir",children:'task :flaky_deploy, on: :web do\n  run "deploy.sh", retries: 3, retry_delay: 5_000\nend\n'})}),"\n",(0,l.jsx)(n.p,{children:"This will:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Run ",(0,l.jsx)(n.code,{children:"deploy.sh"})]}),"\n",(0,l.jsx)(n.li,{children:"If it fails, wait 5 seconds"}),"\n",(0,l.jsx)(n.li,{children:"Retry up to 3 more times"}),"\n",(0,l.jsx)(n.li,{children:"Use exponential backoff (5s, 10s, 20s)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"json-output",children:"JSON Output"}),"\n",(0,l.jsx)(n.p,{children:"For scripting and CI/CD integration:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus run deploy --format json\n"})}),"\n",(0,l.jsx)(n.p,{children:"Output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "status": "ok",\n  "duration_ms": 3421,\n  "tasks_run": 2,\n  "tasks_succeeded": 2,\n  "tasks_failed": 0,\n  "aborted_at": null\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"command-not-found-nexus",children:'"Command not found: nexus"'}),"\n",(0,l.jsx)(n.p,{children:"Ensure the binary is in your PATH:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Check if nexus is in PATH\nwhich nexus\n\n# If not, add to PATH\nexport PATH="/usr/local/bin:$PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"config-file-not-found-nexusexs",children:'"Config file not found: nexus.exs"'}),"\n",(0,l.jsx)(n.p,{children:"Create a config file or specify the path:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"nexus init                           # Create default\nnexus run task -c /path/to/nexus.exs  # Or specify path\n"})}),"\n",(0,l.jsx)(n.h3,{id:"ssh-connection-refused",children:'"SSH connection refused"'}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Verify the host is reachable: ",(0,l.jsx)(n.code,{children:"ping hostname"})]}),"\n",(0,l.jsxs)(n.li,{children:["Verify SSH port is open: ",(0,l.jsx)(n.code,{children:"nc -zv hostname 22"})]}),"\n",(0,l.jsxs)(n.li,{children:["Check SSH config: ",(0,l.jsx)(n.code,{children:"ssh -v user@hostname"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"ssh-authentication-failed",children:'"SSH authentication failed"'}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Ensure your key is added to the remote host's ",(0,l.jsx)(n.code,{children:"~/.ssh/authorized_keys"})]}),"\n",(0,l.jsxs)(n.li,{children:["Check key permissions: ",(0,l.jsx)(n.code,{children:"chmod 600 ~/.ssh/id_ed25519"})]}),"\n",(0,l.jsxs)(n.li,{children:["Use verbose mode: ",(0,l.jsx)(n.code,{children:"nexus run task --verbose"})]}),"\n",(0,l.jsxs)(n.li,{children:["Specify key explicitly: ",(0,l.jsx)(n.code,{children:"nexus run task -i ~/.ssh/mykey"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsx)(n.p,{children:"Now that you're up and running, explore:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/nexus/configuration",children:"Configuration Reference"})})," - Complete DSL documentation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/nexus/cli",children:"CLI Reference"})})," - All commands, flags, and options"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/nexus/ssh",children:"SSH Configuration"})})," - Advanced SSH setup and troubleshooting"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/nexus/examples",children:"Examples"})})," - Real-world deployment pipelines"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/nexus/architecture",children:"Architecture"})})," - How Nexus works internally"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/nexus/troubleshooting",children:"Troubleshooting"})})," - Common issues and solutions"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);