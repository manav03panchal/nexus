"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9013],{7309(n,e,s){s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"troubleshooting","title":"Troubleshooting","description":"Solutions to common issues when using Nexus.","source":"@site/docs/troubleshooting.md","sourceDirName":".","slug":"/troubleshooting","permalink":"/nexus/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/manav03panchal/nexus/tree/main/website/docs/troubleshooting.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"docsSidebar","previous":{"title":"SSH Configuration","permalink":"/nexus/ssh"}}');var r=s(4848),l=s(8453);const o={sidebar_position:8},d="Troubleshooting",c={},t=[{value:"Quick Diagnostic Commands",id:"quick-diagnostic-commands",level:2},{value:"Configuration Issues",id:"configuration-issues",level:2},{value:"Config File Not Found",id:"config-file-not-found",level:3},{value:"Syntax Error in Config",id:"syntax-error-in-config",level:3},{value:"Unknown Config Option",id:"unknown-config-option",level:3},{value:"Task References Unknown Task",id:"task-references-unknown-task",level:3},{value:"Host References Unknown",id:"host-references-unknown",level:3},{value:"Circular Dependency",id:"circular-dependency",level:3},{value:"Connection Issues",id:"connection-issues",level:2},{value:"Connection Refused",id:"connection-refused",level:3},{value:"Connection Timeout",id:"connection-timeout",level:3},{value:"Authentication Failed",id:"authentication-failed",level:3},{value:"Host Key Verification Failed",id:"host-key-verification-failed",level:3},{value:"SSH Agent Issues",id:"ssh-agent-issues",level:3},{value:"Execution Issues",id:"execution-issues",level:2},{value:"Command Timeout",id:"command-timeout",level:3},{value:"Command Failed (Non-Zero Exit)",id:"command-failed-non-zero-exit",level:3},{value:"Sudo Requires Password",id:"sudo-requires-password",level:3},{value:"Task Not Found",id:"task-not-found",level:3},{value:"Output Issues",id:"output-issues",level:2},{value:"No Output Displayed",id:"no-output-displayed",level:3},{value:"Colors Not Displaying",id:"colors-not-displaying",level:3},{value:"Output Garbled/Corrupted",id:"output-garbledcorrupted",level:3},{value:"Performance Issues",id:"performance-issues",level:2},{value:"Slow Execution",id:"slow-execution",level:3},{value:"Memory Issues",id:"memory-issues",level:3},{value:"Common Scenarios",id:"common-scenarios",level:2},{value:"&quot;Works in SSH but not in Nexus&quot;",id:"works-in-ssh-but-not-in-nexus",level:3},{value:"&quot;Preflight Passes but Deploy Fails&quot;",id:"preflight-passes-but-deploy-fails",level:3},{value:"&quot;Task Runs on Wrong Hosts&quot;",id:"task-runs-on-wrong-hosts",level:3},{value:"Debugging Tips",id:"debugging-tips",level:2},{value:"Enable Verbose Output",id:"enable-verbose-output",level:3},{value:"Use Dry Run",id:"use-dry-run",level:3},{value:"Test Manually",id:"test-manually",level:3},{value:"Check Server Logs",id:"check-server-logs",level:3},{value:"JSON Output for Parsing",id:"json-output-for-parsing",level:3},{value:"Incremental Testing",id:"incremental-testing",level:3},{value:"Getting Help",id:"getting-help",level:2},{value:"See Also",id:"see-also",level:2}];function a(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,r.jsx)(e.p,{children:"Solutions to common issues when using Nexus."}),"\n",(0,r.jsx)(e.h2,{id:"quick-diagnostic-commands",children:"Quick Diagnostic Commands"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Validate configuration\nnexus validate\n\n# Run pre-flight checks\nnexus preflight deploy --verbose\n\n# Test with dry run\nnexus run deploy --dry-run\n\n# Verbose output for debugging\nnexus run deploy --verbose\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"configuration-issues",children:"Configuration Issues"}),"\n",(0,r.jsx)(e.h3,{id:"config-file-not-found",children:"Config File Not Found"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: Config file not found: nexus.exs\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Nexus can't find the configuration file."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check if file exists\nls -la nexus.exs\n\n# Create if missing\nnexus init\n\n# Specify path explicitly\nnexus run deploy -c /path/to/nexus.exs\n\n# Check current directory\npwd\n"})}),"\n",(0,r.jsx)(e.h3,{id:"syntax-error-in-config",children:"Syntax Error in Config"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: syntax error: missing 'do' in 'task'\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Invalid Elixir syntax in ",(0,r.jsx)(e.code,{children:"nexus.exs"}),"."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Check for missing ",(0,r.jsx)(e.code,{children:"do"}),"/",(0,r.jsx)(e.code,{children:"end"})," blocks:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Wrong\ntask :deploy\n  run "echo hello"\nend\n\n# Correct\ntask :deploy do\n  run "echo hello"\nend\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check for missing commas:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Wrong\nconfig :nexus\n  default_user: "deploy"\n  default_port: 22\n\n# Correct\nconfig :nexus,\n  default_user: "deploy",\n  default_port: 22\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Validate syntax:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"elixir -e 'Code.compile_file(\"nexus.exs\")'\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"unknown-config-option",children:"Unknown Config Option"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: unknown config option: parallel_limit\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Using an option that doesn't exist."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Valid config options:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"default_user"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"default_port"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"connect_timeout"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"command_timeout"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"max_connections"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"continue_on_error"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Correct options\nconfig :nexus,\n  default_user: "deploy",\n  default_port: 22,\n  connect_timeout: 10_000,\n  command_timeout: 60_000,\n  max_connections: 5,\n  continue_on_error: false\n'})}),"\n",(0,r.jsx)(e.h3,{id:"task-references-unknown-task",children:"Task References Unknown Task"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: task :deploy depends on unknown task :build\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," A task's ",(0,r.jsx)(e.code,{children:"deps"})," references a task that doesn't exist."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Make sure all dependencies exist\ntask :build do\n  run "mix compile"\nend\n\ntask :deploy, deps: [:build] do  # :build must exist\n  run "deploy.sh"\nend\n'})}),"\n",(0,r.jsx)(e.h3,{id:"host-references-unknown",children:"Host References Unknown"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: task :deploy references unknown host or group :webservers\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Task's ",(0,r.jsx)(e.code,{children:"on"})," option references undefined host or group."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Define hosts first\nhost :web1, "deploy@192.168.1.10"\nhost :web2, "deploy@192.168.1.11"\n\n# Then define groups\ngroup :webservers, [:web1, :web2]\n\n# Now use in tasks\ntask :deploy, on: :webservers do\n  run "deploy.sh"\nend\n'})}),"\n",(0,r.jsx)(e.h3,{id:"circular-dependency",children:"Circular Dependency"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: circular dependency detected: a -> b -> c -> a\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Tasks form a dependency cycle."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solution:"})," Restructure tasks to break the cycle:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:"# Wrong: circular dependency\ntask :a, deps: [:c] do ... end\ntask :b, deps: [:a] do ... end\ntask :c, deps: [:b] do ... end\n\n# Correct: no cycles\ntask :a do ... end\ntask :b, deps: [:a] do ... end\ntask :c, deps: [:b] do ... end\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,r.jsx)(e.h3,{id:"connection-refused",children:"Connection Refused"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'Error: {:connection_refused, "192.168.1.10"}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Causes:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"SSH server not running on target"}),"\n",(0,r.jsx)(e.li,{children:"Wrong port"}),"\n",(0,r.jsx)(e.li,{children:"Firewall blocking"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# Test connectivity\nnc -zv 192.168.1.10 22\n\n# Check if SSH is running (on server)\nsudo systemctl status sshd\n\n# Check firewall (on server)\nsudo ufw status\nsudo iptables -L -n | grep 22\n\n# Try different port\nhost :server, "deploy@192.168.1.10:2222"\n'})}),"\n",(0,r.jsx)(e.h3,{id:"connection-timeout",children:"Connection Timeout"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'Error: {:connection_timeout, "192.168.1.10"}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Causes:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Network unreachable"}),"\n",(0,r.jsx)(e.li,{children:"Firewall dropping packets (not rejecting)"}),"\n",(0,r.jsx)(e.li,{children:"VPN issues"}),"\n",(0,r.jsx)(e.li,{children:"DNS resolution failing"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Test network\nping 192.168.1.10\n\n# Test with TCP\nnc -zv -w 10 192.168.1.10 22\n\n# Increase timeout\nconfig :nexus,\n  connect_timeout: 30_000  # 30 seconds\n\n# Check DNS\nnslookup hostname.example.com\n"})}),"\n",(0,r.jsx)(e.h3,{id:"authentication-failed",children:"Authentication Failed"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'Error: {:auth_failed, "192.168.1.10"}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Causes:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Wrong SSH key"}),"\n",(0,r.jsx)(e.li,{children:"Key not authorized on server"}),"\n",(0,r.jsx)(e.li,{children:"Wrong username"}),"\n",(0,r.jsx)(e.li,{children:"Key permissions wrong"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# Test SSH directly with verbose output\nssh -vvv deploy@192.168.1.10\n\n# Check which key is being used\nssh -v deploy@192.168.1.10 2>&1 | grep "Offering"\n\n# Verify key is in authorized_keys on server\ncat ~/.ssh/authorized_keys\n\n# Check key permissions\nls -la ~/.ssh/\n# Private keys should be 600\n# .ssh directory should be 700\n\n# Specify key explicitly\nnexus run deploy -i ~/.ssh/specific_key\n'})}),"\n",(0,r.jsx)(e.h3,{id:"host-key-verification-failed",children:"Host Key Verification Failed"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Host key verification failed.\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Server's host key not in ",(0,r.jsx)(e.code,{children:"known_hosts"})," or has changed."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Add host key\nssh-keyscan -H 192.168.1.10 >> ~/.ssh/known_hosts\n\n# If key legitimately changed, remove old and add new\nssh-keygen -R 192.168.1.10\nssh-keyscan -H 192.168.1.10 >> ~/.ssh/known_hosts\n"})}),"\n",(0,r.jsx)(e.h3,{id:"ssh-agent-issues",children:"SSH Agent Issues"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Could not open a connection to your authentication agent.\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# Start SSH agent\neval "$(ssh-agent -s)"\n\n# Add key\nssh-add ~/.ssh/nexus_deploy\n\n# Verify\nssh-add -l\necho $SSH_AUTH_SOCK\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"execution-issues",children:"Execution Issues"}),"\n",(0,r.jsx)(e.h3,{id:"command-timeout",children:"Command Timeout"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'Error: {:command_timeout, "long_running_command"}\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Command took longer than allowed timeout."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Increase command timeout\nrun "long_running_script.sh", timeout: 3_600_000  # 1 hour\n\n# Or increase global timeout\nconfig :nexus,\n  command_timeout: 300_000  # 5 minutes\n'})}),"\n",(0,r.jsx)(e.h3,{id:"command-failed-non-zero-exit",children:"Command Failed (Non-Zero Exit)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[FAILED] Task: deploy\n  Host: web1 (failed)\n    [x] $ deploy.sh\n        Error: something went wrong\n        (exit: 1, 234ms, attempts: 1)\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Command returned non-zero exit code."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Test command manually\nssh deploy@web1 'deploy.sh'\necho $?\n\n# Check command output for errors\nnexus run deploy --verbose\n\n# Add error handling in script\nrun \"deploy.sh || echo 'Deploy failed' && exit 1\"\n\n# Use retries for flaky commands\nrun \"flaky_command.sh\", retries: 3, retry_delay: 5_000\n"})}),"\n",(0,r.jsx)(e.h3,{id:"sudo-requires-password",children:"Sudo Requires Password"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: sudo: a password is required\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Remote user needs password for sudo."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.p,{children:"Configure passwordless sudo for specific commands:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# On the remote server, edit sudoers\nsudo visudo\n\n# Add line for deploy user (specific commands)\ndeploy ALL=(ALL) NOPASSWD: /bin/systemctl restart myapp, /bin/systemctl status myapp\n\n# Or for all commands (less secure)\ndeploy ALL=(ALL) NOPASSWD: ALL\n"})}),"\n",(0,r.jsx)(e.h3,{id:"task-not-found",children:"Task Not Found"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Error: Unknown tasks: deploy\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Specified task doesn't exist in config."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# List available tasks\nnexus list\n\n# Check spelling\n# Task names are atoms, case-sensitive\n\n# Verify config file\nnexus validate\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"output-issues",children:"Output Issues"}),"\n",(0,r.jsx)(e.h3,{id:"no-output-displayed",children:"No Output Displayed"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Commands ran but output wasn't shown."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Use verbose mode\nnexus run deploy --verbose\n\n# Check quiet mode isn't enabled\n# Remove -q or --quiet flag\n\n# For JSON output\nnexus run deploy --format json\n"})}),"\n",(0,r.jsx)(e.h3,{id:"colors-not-displaying",children:"Colors Not Displaying"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Terminal doesn't support colors or ",(0,r.jsx)(e.code,{children:"NO_COLOR"})," is set."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check NO_COLOR\necho $NO_COLOR\n\n# Unset if needed\nunset NO_COLOR\n\n# Force colors (check terminal support)\nTERM=xterm-256color nexus run deploy\n"})}),"\n",(0,r.jsx)(e.h3,{id:"output-garbledcorrupted",children:"Output Garbled/Corrupted"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Binary output or encoding issues."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Use plain mode\nnexus run deploy --plain\n\n# Redirect output\nnexus run deploy > output.log 2>&1\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(e.h3,{id:"slow-execution",children:"Slow Execution"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Causes:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Many sequential connections"}),"\n",(0,r.jsx)(e.li,{children:"Large parallel limit"}),"\n",(0,r.jsx)(e.li,{children:"Network latency"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Reduce parallel limit if overloading\nnexus run deploy --parallel-limit 5\n\n# Increase connection pool\nconfig :nexus,\n  max_connections: 20\n\n# Use serial strategy for rolling deploys\ntask :deploy, on: :web, strategy: :serial do\n  run "deploy.sh"\nend\n'})}),"\n",(0,r.jsx)(e.h3,{id:"memory-issues",children:"Memory Issues"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Too many concurrent connections."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Reduce parallel limit\nnexus run deploy --parallel-limit 5\n\n# Reduce max connections per host\nconfig :nexus,\n  max_connections: 3\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"common-scenarios",children:"Common Scenarios"}),"\n",(0,r.jsx)(e.h3,{id:"works-in-ssh-but-not-in-nexus",children:'"Works in SSH but not in Nexus"'}),"\n",(0,r.jsx)(e.p,{children:"If a command works via manual SSH but fails in Nexus:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Environment differences"}),": SSH login sessions may have different environment variables"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Explicitly set environment\nrun "export PATH=/usr/local/bin:$PATH && my_command"\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Interactive vs non-interactive"}),": Some commands expect a terminal"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:'# Force non-interactive\nrun "DEBIAN_FRONTEND=noninteractive apt-get install -y package", sudo: true\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Shell differences"}),": Nexus uses ",(0,r.jsx)(e.code,{children:"/bin/sh"}),", not your login shell"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-elixir",children:"# Force bash if needed\nrun \"bash -c 'source ~/.bashrc && my_command'\"\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"preflight-passes-but-deploy-fails",children:'"Preflight Passes but Deploy Fails"'}),"\n",(0,r.jsx)(e.p,{children:"Preflight only checks connectivity, not all command requirements."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Run with verbose for more details\nnexus run deploy --verbose\n\n# Test commands individually\nssh deploy@server 'command1'\nssh deploy@server 'command2'\n"})}),"\n",(0,r.jsx)(e.h3,{id:"task-runs-on-wrong-hosts",children:'"Task Runs on Wrong Hosts"'}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Cause:"})," Wrong target specification or group membership."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check configuration\nnexus list --format json | jq '.tasks[] | select(.name == \"deploy\")'\n\n# Verify groups\nnexus list --format json | jq '.groups'\n\n# Use dry run\nnexus run deploy --dry-run\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"debugging-tips",children:"Debugging Tips"}),"\n",(0,r.jsx)(e.h3,{id:"enable-verbose-output",children:"Enable Verbose Output"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"nexus run deploy --verbose\n"})}),"\n",(0,r.jsx)(e.h3,{id:"use-dry-run",children:"Use Dry Run"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"nexus run deploy --dry-run\n"})}),"\n",(0,r.jsx)(e.h3,{id:"test-manually",children:"Test Manually"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Test SSH connection\nssh -v deploy@server 'echo test'\n\n# Test specific command\nssh deploy@server 'exact_command_from_nexus.exs'\n"})}),"\n",(0,r.jsx)(e.h3,{id:"check-server-logs",children:"Check Server Logs"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# On the remote server\nsudo tail -f /var/log/auth.log      # SSH auth issues\nsudo journalctl -f                   # General system logs\nsudo tail -f /var/log/syslog        # Syslog\n"})}),"\n",(0,r.jsx)(e.h3,{id:"json-output-for-parsing",children:"JSON Output for Parsing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Capture structured output\nnexus run deploy --format json > result.json\n\n# Parse with jq\ncat result.json | jq '.task_results[] | select(.status == \"error\")'\n"})}),"\n",(0,r.jsx)(e.h3,{id:"incremental-testing",children:"Incremental Testing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Test individual tasks\nnexus run build\nnexus run test\nnexus run deploy\n\n# Instead of\nnexus run full_deploy\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsx)(e.p,{children:"If you're still stuck:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Check the documentation:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"/nexus/getting-started",children:"Getting Started"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"/nexus/configuration",children:"Configuration Reference"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"/nexus/ssh",children:"SSH Configuration"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Validate your setup:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"nexus validate\nnexus preflight deploy --verbose\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Search existing issues:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/manav03panchal/nexus/issues",children:"GitHub Issues"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Open a new issue:"}),"\nInclude:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Nexus version (",(0,r.jsx)(e.code,{children:"nexus --version"}),")"]}),"\n",(0,r.jsxs)(e.li,{children:["Your ",(0,r.jsx)(e.code,{children:"nexus.exs"})," (sanitized)"]}),"\n",(0,r.jsx)(e.li,{children:"Full error message"}),"\n",(0,r.jsx)(e.li,{children:"Steps to reproduce"}),"\n",(0,r.jsxs)(e.li,{children:["Output of ",(0,r.jsx)(e.code,{children:"nexus preflight --verbose"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/nexus/getting-started",children:"Getting Started"})," - Initial setup"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/nexus/configuration",children:"Configuration Reference"})," - DSL documentation"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/nexus/ssh",children:"SSH Configuration"})," - SSH details"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/nexus/architecture",children:"Architecture"})," - Internal workings"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}}}]);